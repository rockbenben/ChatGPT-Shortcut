"use strict";(self.webpackChunkchatgpt_shortcut=self.webpackChunkchatgpt_shortcut||[]).push([["5294"],{11164(e,r,t){t.r(r),t.d(r,{default:()=>c});var o=t(96540),a=t(56347),n=t(18049);let c=()=>{let e=(0,a.zy)();(0,o.useEffect)(()=>{var t,o;let a,n=(t=e.search,o=e.hash,a=new URLSearchParams(t||""),new URLSearchParams((o||"").replace(/^#/,"")).forEach((e,r)=>{a.has(r)||a.set(r,e)}),a);try{let e=n.get("loginToken");if(e)return void r(e);let t=n.get("access_token")||n.get("jwt")||n.get("token")||n.get("id_token"),o=n.get("state"),a=n.get("provider")||"google",c=n.get("code");if(t||c)if(window.opener){let e=n.get("user"),r=(e=>{if(e)try{let r=decodeURIComponent(e);return JSON.parse(r)}catch(e){console.error("Failed to parse user data from OAuth callback:",e);return}})(e),s=Object.fromEntries(n.entries());window.opener.postMessage({provider:a,jwt:t,access_token:t,code:c,state:o,user:r,id_token:n.get("id_token"),rawParams:s},"*"),window.close()}else console.error("Please do not close the main login page during the login process")}catch(e){console.error("An error occurred while handling the OAuth callback:",e)}},[e]);let r=async e=>{try{await (0,n.JT)(e)}catch(e){console.error("Login failed, token is invalid or expired:",e)}finally{window.location.replace("/")}};return null}}}]);