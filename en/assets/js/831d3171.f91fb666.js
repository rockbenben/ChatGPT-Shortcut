"use strict";(self.webpackChunkchatgpt_shortcut=self.webpackChunkchatgpt_shortcut||[]).push([["5660"],{76257(e,s,r){r.r(s),r.d(s,{default:()=>g});var a=r(74848),d=r(96540),o=r(21085),t=r(24301),i=r(89986),l=r(35710),n=r(71024),c=r(86162),m=r(65232),h=r(18495),w=r(30568),u=r(48051);let{Title:p}=t.A,g=()=>{let[e]=i.A.useForm(),{token:s}=l.A.useToken(),[r,t]=(0,d.useState)(""),[g,x]=(0,d.useState)(!1),{message:P}=n.A.useApp();(0,d.useEffect)(()=>{let s=new URLSearchParams(window.location.search).get("code");s&&(t(s),e.setFieldsValue({code:s}))},[e]);let A=async s=>{if(s.newPassword!==s.confirmPassword)return void P.open({type:"error",content:(0,w.T)({id:"validation.password.match",message:"\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF01"}),duration:5});x(!0);try{await (0,u.xw)(s),P.success((0,a.jsx)(w.A,{id:"message.resetPassword.success",children:"\u5BC6\u7801\u91CD\u7F6E\u6210\u529F\uFF01"})),e.resetFields(),setTimeout(()=>{window.location.href="/"},1500)}catch(e){console.error((0,w.T)({id:"message.resetPassword.error",message:"\u5BC6\u7801\u91CD\u7F6E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\uFF1A"}),e),P.open({type:"error",content:(0,a.jsx)(w.A,{id:"message.resetPassword.error",children:"\u5BC6\u7801\u91CD\u7F6E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"}),duration:5})}finally{x(!1)}},j=[{required:!0,message:(0,w.T)({id:"input.newPassword",message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801\uFF01"})},{min:6,message:(0,w.T)({id:"validation.password.length",message:"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A 6 \u4E2A\u5B57\u7B26"})}];return(0,a.jsx)(o.A,{title:(0,w.T)({id:"button.resetPassword",message:"\u91CD\u7F6E\u5BC6\u7801"}),children:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 60px)",backgroundColor:s.colorBgLayout,padding:"50px 16px"},children:(0,a.jsxs)(c.A,{className:"reset-password-card",style:{maxWidth:440,width:"100%",boxShadow:s.boxShadowSecondary,borderRadius:s.borderRadiusLG,border:`1px solid ${s.colorBorderSecondary}`},children:[(0,a.jsx)(p,{level:2,style:{textAlign:"center",marginBottom:32},children:(0,a.jsx)(w.A,{id:"button.resetPassword",children:"\u91CD\u7F6E\u5BC6\u7801"})}),(0,a.jsxs)(i.A,{form:e,layout:"vertical",onFinish:A,requiredMark:!1,initialValues:{code:r},size:"large",children:[(0,a.jsx)(i.A.Item,{name:"code",label:(0,a.jsx)(w.A,{id:"placeholder.resetPassword.code",children:"\u91CD\u7F6E\u4EE3\u7801"}),rules:[{required:!0,message:(0,w.T)({id:"input.resetPassword.code",message:"\u8BF7\u8F93\u5165\u60A8\u7684\u91CD\u7F6E\u4EE3\u7801\uFF01"})}],children:(0,a.jsx)(m.A,{placeholder:(0,w.T)({id:"placeholder.resetPassword.code",message:"\u91CD\u7F6E\u4EE3\u7801"})})}),(0,a.jsx)(i.A.Item,{name:"newPassword",label:(0,a.jsx)(w.A,{id:"placeholder.newPassword",children:"\u65B0\u5BC6\u7801"}),rules:j,hasFeedback:!0,children:(0,a.jsx)(m.A.Password,{autoComplete:"new-password",placeholder:(0,w.T)({id:"placeholder.newPassword",message:"\u65B0\u5BC6\u7801"})})}),(0,a.jsx)(i.A.Item,{name:"confirmPassword",label:(0,a.jsx)(w.A,{id:"placeholder.confirmPassword",children:"\u786E\u8BA4\u65B0\u5BC6\u7801"}),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:(0,w.T)({id:"validation.confirmPassword.required",message:"\u8BF7\u786E\u8BA4\u65B0\u5BC6\u7801\uFF01"})},({getFieldValue:e})=>({validator:(s,r)=>r&&e("newPassword")!==r?Promise.reject(Error((0,w.T)({id:"validation.password.match",message:"\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF01"}))):Promise.resolve()})],children:(0,a.jsx)(m.A.Password,{autoComplete:"new-password",placeholder:(0,w.T)({id:"placeholder.confirmPassword",message:"\u786E\u8BA4\u65B0\u5BC6\u7801"})})}),(0,a.jsx)(i.A.Item,{style:{marginBottom:0},children:(0,a.jsx)(h.Ay,{type:"primary",htmlType:"submit",block:!0,loading:g,size:"large",children:(0,a.jsx)(w.A,{id:"button.resetPassword",children:"\u91CD\u7F6E\u5BC6\u7801"})})})]})]})})})}}}]);