"use strict";(self.webpackChunkchatgpt_shortcut=self.webpackChunkchatgpt_shortcut||[]).push([["650"],{49776(e,r,s){s.d(r,{A:()=>o});var a=s(96540);let t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};var i=s(67928);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,r)=>a.createElement(i.A,l({},e,{ref:r,icon:t})))},85489(e,r,s){s.d(r,{A:()=>o});var a=s(96540);let t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};var i=s(67928);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,r)=>a.createElement(i.A,l({},e,{ref:r,icon:t})))},58447(e,r,s){s.d(r,{O:()=>o,c:()=>l});var a=s(74848),t=s(96540),i=s(48051);let l=(0,t.createContext)({userAuth:null,refreshUserAuth:()=>{},setUserAuth:e=>{},authLoading:!1});function o({children:e}){let[r,s]=(0,t.useState)(null),[o,n]=(0,t.useState)(!0),c=(0,t.useCallback)(async()=>{(0,t.startTransition)(()=>n(!0));try{let e=await (0,i.nE)();(0,t.startTransition)(()=>s(e))}catch(e){console.error("Failed to fetch user data:",e)}finally{(0,t.startTransition)(()=>n(!1))}},[]);(0,t.useEffect)(()=>{c()},[]);let d=(0,t.useMemo)(()=>({userAuth:r,setUserAuth:s,refreshUserAuth:c,authLoading:o}),[r,c,o]);return(0,a.jsx)(l.Provider,{value:d,children:e})}},72618(e,r,s){s.r(r),s.d(r,{default:()=>D});var a=s(74848),t=s(96540),i=s(95310),l=s(30568),o=s(21085),n=s(24301),c=s(71024),d=s(35710),h=s(89986),m=s(84073),u=s(47152),x=s(16370),g=s(36813),p=s(71500),j=s(18495),y=s(86162),A=s(78667),f=s(65232),v=s(66845),w=s(63756),b=s(85489),P=s(49776),T=s(76164);let z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var V=s(67928);function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let C=t.forwardRef((e,r)=>t.createElement(V.A,k({},e,{ref:r,icon:z})));var H=s(26385);let O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let B=t.forwardRef((e,r)=>t.createElement(V.A,S({},e,{ref:r,icon:O})));var L=s(51757),E=s(61381),I=s(58447),M=s(48051);let{Title:R,Text:F}=n.A,q=()=>{let{userAuth:e,refreshUserAuth:r,authLoading:s}=(0,t.useContext)(I.c),{message:n}=c.A.useApp(),{token:z}=d.A.useToken(),[V,k]=(0,t.useState)(!1),[O,S]=(0,t.useState)(!1),[q,D]=(0,t.useState)(""),[U,G]=(0,t.useState)("password"),[$]=h.A.useForm(),[_]=h.A.useForm();(0,t.useEffect)(()=>{e?.data?.username&&D(e.data.username)},[e]),(0,t.useEffect)(()=>{if(!s&&!e){let e=setTimeout(()=>{window.location.href="/"},2e3);return()=>clearTimeout(e)}},[s,e]);let W=async()=>{if(!q.trim())return void n.error("Username cannot be empty");if(q===e?.data.username)return void S(!1);k(!0);try{await (0,M.kZ)(q),(0,M.jI)("username",q),await r(),n.success("Username updated successfully!"),S(!1)}catch(r){console.error("Error updating username:",r);let e=r?.response?.data?.error?.message||"Unknown error";n.error(`Failed to update username: ${e}`)}finally{k(!1)}},Z=async e=>{k(!0);try{await (0,M.ec)(e),n.success((0,a.jsx)(l.A,{id:"message.success.passwordChanged",children:"\u5BC6\u7801\u4FEE\u6539\u6210\u529F\uFF01"})),$.resetFields()}catch(e){console.error("Error changing password:",e),n.error((0,a.jsx)(l.A,{id:"message.error.passwordChangeFailed",children:"\u5BC6\u7801\u4FEE\u6539\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"}))}finally{k(!1)}},J=async e=>{k(!0);try{await (0,M.BD)(e.email),n.success((0,a.jsx)(l.A,{id:"message.success.forgotPassword",children:"\u5BC6\u7801\u91CD\u7F6E\u90AE\u4EF6\u5DF2\u53D1\u9001\uFF01"})),_.resetFields()}catch(e){console.error("Error sending forgot password email:",e),n.error((0,a.jsx)(l.A,{id:"message.error.forgotPassword",children:"\u53D1\u9001\u5BC6\u7801\u91CD\u7F6E\u90AE\u4EF6\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"}))}finally{k(!1)}};return s||!e?(0,a.jsx)(o.A,{title:(0,l.T)({id:"link.myAccount",message:"\u6211\u7684\u8D26\u6237"}),children:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,a.jsx)(m.A,{size:"large",tip:(0,a.jsx)(l.A,{id:"message.loading",children:"\u52A0\u8F7D\u767B\u5F55\u72B6\u6001..."})})})}):(0,a.jsx)(o.A,{title:(0,l.T)({id:"link.myAccount",message:"\u6211\u7684\u8D26\u6237"}),children:(0,a.jsx)("div",{style:{minHeight:"calc(100vh - 60px)",padding:"24px 0"},children:(0,a.jsx)(u.A,{justify:"center",children:(0,a.jsx)(x.A,{xs:24,sm:22,md:20,lg:16,xl:14,children:(0,a.jsxs)(g.A,{orientation:"vertical",size:"large",style:{width:"100%"},children:[(0,a.jsx)("div",{style:{padding:"16px 24px",background:z.colorBgContainer,borderRadius:z.borderRadiusLG,border:`1px solid ${z.colorBorderSecondary}`,boxShadow:z.boxShadowTertiary},children:(0,a.jsxs)(g.A,{separator:(0,a.jsx)(p.A,{orientation:"vertical"}),children:[(0,a.jsx)(i.A,{to:"/",style:{display:"flex",alignItems:"center",gap:8,color:z.colorTextSecondary},children:(0,a.jsx)(j.Ay,{type:"text",icon:(0,a.jsx)(b.A,{}),style:{paddingLeft:0},children:(0,a.jsx)(l.A,{id:"link.home",children:"\u8FD4\u56DE\u9996\u9875"})})}),(0,a.jsx)(i.A,{to:"/user/center",style:{display:"flex",alignItems:"center",gap:8,color:z.colorTextSecondary},children:(0,a.jsx)(j.Ay,{type:"text",icon:(0,a.jsx)(P.A,{}),children:(0,a.jsx)(l.A,{id:"link.myCenter",children:"\u4E2A\u4EBA\u4E2D\u5FC3"})})})]})}),(0,a.jsxs)(u.A,{gutter:[24,24],children:[(0,a.jsx)(x.A,{xs:24,md:10,children:(0,a.jsx)(y.A,{style:{height:"100%",borderRadius:z.borderRadiusLG,border:`1px solid ${z.colorBorderSecondary}`,boxShadow:z.boxShadowTertiary},title:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(T.A,{style:{color:z.colorPrimary}}),(0,a.jsx)(l.A,{id:"title.userInfo",children:"\u7528\u6237\u4FE1\u606F"})]}),children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[(0,a.jsx)(A.A,{size:80,icon:(0,a.jsx)(T.A,{}),style:{backgroundColor:z.colorPrimaryBg,color:z.colorPrimary,marginBottom:16}}),O?(0,a.jsxs)(g.A.Compact,{style:{width:"100%",maxWidth:240},children:[(0,a.jsx)(f.A,{value:q,onChange:e=>D(e.target.value),onPressEnter:W,autoFocus:!0}),(0,a.jsx)(j.Ay,{type:"primary",icon:(0,a.jsx)(C,{}),onClick:W,loading:V}),(0,a.jsx)(j.Ay,{icon:(0,a.jsx)(H.A,{}),onClick:()=>S(!1)})]}):(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(R,{level:4,style:{margin:0},children:e.data.username}),(0,a.jsx)(j.Ay,{type:"text",icon:(0,a.jsx)(H.A,{}),onClick:()=>{D(e?.data.username||""),S(!0)},size:"small",style:{color:z.colorTextSecondary}})]}),(0,a.jsx)(F,{type:"secondary",style:{marginTop:4},children:e.data.email}),e.data.userprompts&&e.data.userprompts.filter(e=>e.share).length>0?(0,a.jsxs)(v.A,{color:"green",style:{marginTop:12},children:["\u{1F4DD} ",(0,a.jsx)(l.A,{id:"label.sharedPrompts",children:"\u5DF2\u5206\u4EAB\u63D0\u793A\u8BCD"}),": "+e.data.userprompts.filter(e=>e.share).length]}):(0,a.jsxs)(v.A,{color:"blue",style:{marginTop:12},children:["\u{1F331} ",(0,a.jsx)(l.A,{id:"label.newMember",children:"\u65B0\u6210\u5458\uFF0C\u5F00\u59CB\u5206\u4EAB\u7B2C\u4E00\u4E2A\u63D0\u793A\u8BCD\u5427"})]})]})})}),(0,a.jsx)(x.A,{xs:24,md:14,children:(0,a.jsx)(y.A,{style:{height:"100%",borderRadius:z.borderRadiusLG,border:`1px solid ${z.colorBorderSecondary}`,boxShadow:z.boxShadowTertiary},title:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(B,{style:{color:z.colorPrimary}}),(0,a.jsx)(l.A,{id:"title.security",children:"\u5B89\u5168\u8BBE\u7F6E"})]}),extra:(0,a.jsx)(w.A,{value:U,onChange:e=>G(e),options:[{label:(0,a.jsx)(l.A,{id:"action.changePassword",children:"\u4FEE\u6539\u5BC6\u7801"}),value:"password"},{label:(0,a.jsx)(l.A,{id:"action.forgotPassword",children:"\u5FD8\u8BB0\u5BC6\u7801"}),value:"reset"}]}),children:"password"===U?(0,a.jsxs)(h.A,{form:$,onFinish:Z,layout:"vertical",requiredMark:!1,children:[(0,a.jsx)(h.A.Item,{name:"currentPassword",label:(0,a.jsx)(l.A,{id:"placeholder.currentPassword",children:"\u5F53\u524D\u5BC6\u7801"}),rules:[{required:!0,message:(0,l.T)({id:"validation.currentPassword.required",message:"\u8BF7\u8F93\u5165\u5F53\u524D\u5BC6\u7801\uFF01"})}],children:(0,a.jsx)(f.A.Password,{prefix:(0,a.jsx)(L.A,{style:{color:z.colorTextDescription}}),placeholder:(0,l.T)({id:"placeholder.currentPassword",message:"\u5F53\u524D\u5BC6\u7801"}),size:"large"})}),(0,a.jsx)(h.A.Item,{name:"newPassword",label:(0,a.jsx)(l.A,{id:"placeholder.newPassword",children:"\u65B0\u5BC6\u7801"}),rules:[{required:!0,message:(0,l.T)({id:"input.newPassword",message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801\uFF01"})},{min:6,message:(0,l.T)({id:"validation.password.length",message:"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A 6 \u4E2A\u5B57\u7B26"})}],children:(0,a.jsx)(f.A.Password,{prefix:(0,a.jsx)(L.A,{style:{color:z.colorTextDescription}}),placeholder:(0,l.T)({id:"placeholder.newPassword",message:"\u65B0\u5BC6\u7801"}),size:"large"})}),(0,a.jsx)(h.A.Item,{name:"confirmPassword",label:(0,a.jsx)(l.A,{id:"placeholder.confirmPassword",children:"\u786E\u8BA4\u65B0\u5BC6\u7801"}),dependencies:["newPassword"],rules:[{required:!0,message:(0,l.T)({id:"validation.confirmPassword.required",message:"\u8BF7\u786E\u8BA4\u65B0\u5BC6\u7801\uFF01"})},({getFieldValue:e})=>({validator:(r,s)=>s&&e("newPassword")!==s?Promise.reject(Error((0,l.T)({id:"validation.password.match",message:"\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF01"}))):Promise.resolve()})],children:(0,a.jsx)(f.A.Password,{prefix:(0,a.jsx)(L.A,{style:{color:z.colorTextDescription}}),placeholder:(0,l.T)({id:"placeholder.confirmPassword",message:"\u786E\u8BA4\u65B0\u5BC6\u7801"}),size:"large"})}),(0,a.jsx)(h.A.Item,{style:{marginBottom:0},children:(0,a.jsx)(j.Ay,{type:"primary",htmlType:"submit",loading:V,block:!0,size:"large",children:(0,a.jsx)(l.A,{id:"action.changePassword",children:"\u4FEE\u6539\u5BC6\u7801"})})})]}):(0,a.jsxs)(h.A,{form:_,onFinish:J,layout:"vertical",requiredMark:!1,children:[(0,a.jsx)("div",{style:{marginBottom:24,padding:16,background:z.colorFillAlter,borderRadius:z.borderRadiusLG},children:(0,a.jsx)(F,{type:"secondary",children:(0,a.jsx)(l.A,{id:"message.forgotPassword.info",children:"\u5982\u679C\u60A8\u5FD8\u8BB0\u4E86\u5F53\u524D\u5BC6\u7801\uFF0C\u53EF\u4EE5\u901A\u8FC7\u90AE\u7BB1\u91CD\u7F6E\u3002\u6211\u4EEC\u4F1A\u5411\u60A8\u7684\u6CE8\u518C\u90AE\u7BB1\u53D1\u9001\u4E00\u5C01\u5305\u542B\u91CD\u7F6E\u94FE\u63A5\u7684\u90AE\u4EF6\u3002"})})}),(0,a.jsx)(h.A.Item,{name:"email",label:(0,a.jsx)(l.A,{id:"placeholder.email",children:"\u90AE\u7BB1"}),rules:[{required:!0,message:(0,l.T)({id:"validation.email.required",message:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\uFF01"})},{type:"email",message:(0,l.T)({id:"validation.email.invalid",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740\uFF01"})}],initialValue:e?.data?.email||"",children:(0,a.jsx)(f.A,{prefix:(0,a.jsx)(E.A,{style:{color:z.colorTextDescription}}),placeholder:(0,l.T)({id:"placeholder.email",message:"\u90AE\u7BB1"}),size:"large"})}),(0,a.jsx)(h.A.Item,{style:{marginBottom:0},children:(0,a.jsx)(j.Ay,{type:"primary",htmlType:"submit",loading:V,block:!0,size:"large",children:(0,a.jsx)(l.A,{id:"action.sendResetEmail",children:"\u53D1\u9001\u91CD\u7F6E\u90AE\u4EF6"})})})]})})})]})]})})})})})},D=()=>(0,a.jsx)(I.O,{children:(0,a.jsx)(c.A,{children:(0,a.jsx)(q,{})})})}}]);