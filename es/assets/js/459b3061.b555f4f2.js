"use strict";(self.webpackChunkchatgpt_shortcut=self.webpackChunkchatgpt_shortcut||[]).push([["5294"],{71253:function(e,t,r){r.r(t),r.d(t,{default:()=>c});var o=r(96540),n=r(56347),a=r(46524);let c=()=>{let e=(0,n.zy)();(0,o.useEffect)(()=>{var r,o;let n,a=(r=e.search,o=e.hash,n=new URLSearchParams(r||""),new URLSearchParams((o||"").replace(/^#/,"")).forEach((e,t)=>{n.has(t)||n.set(t,e)}),n);try{let e=a.get("loginToken");if(e)return void t(e);let r=a.get("access_token")||a.get("jwt")||a.get("token")||a.get("id_token"),o=a.get("state"),n=a.get("provider")||"google",c=a.get("code");if(r||c)if(window.opener){let e=a.get("user"),t=(e=>{if(e)try{let t=decodeURIComponent(e);return JSON.parse(t)}catch(e){console.error("Failed to parse user data from OAuth callback:",e);return}})(e),s=Object.fromEntries(a.entries());window.opener.postMessage({provider:n,jwt:r,access_token:r,code:c,state:o,user:t,id_token:a.get("id_token"),rawParams:s},"*"),window.close()}else console.error("Please do not close the main login page during the login process")}catch(e){console.error("An error occurred while handling the OAuth callback:",e)}},[e]);let t=async e=>{try{let t=await (0,a.JT)(e);console.log("Login successful:",t)}catch(e){console.error("Login failed, token is invalid or expired:",e)}finally{window.location.replace("/")}};return null}}}]);