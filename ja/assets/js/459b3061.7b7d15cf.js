"use strict";(self.webpackChunkchatgpt_shortcut=self.webpackChunkchatgpt_shortcut||[]).push([["5294"],{11164(e,r,t){t.r(r),t.d(r,{default:()=>c});var o=t(96540),n=t(56347),a=t(61063);let c=()=>{let e=(0,n.zy)();(0,o.useEffect)(()=>{var t,o;let n,a=(t=e.search,o=e.hash,n=new URLSearchParams(t||""),new URLSearchParams((o||"").replace(/^#/,"")).forEach((e,r)=>{n.has(r)||n.set(r,e)}),n);try{let e=a.get("loginToken");if(e)return void r(e);let t=a.get("access_token")||a.get("jwt")||a.get("token")||a.get("id_token"),o=a.get("state"),n=a.get("provider")||"google",c=a.get("code");if(t||c)if(window.opener){let e=a.get("user"),r=(e=>{if(e)try{let r=decodeURIComponent(e);return JSON.parse(r)}catch(e){console.error("Failed to parse user data from OAuth callback:",e);return}})(e),s=Object.fromEntries(a.entries());window.opener.postMessage({provider:n,jwt:t,access_token:t,code:c,state:o,user:r,id_token:a.get("id_token"),rawParams:s},"*"),window.close()}else console.error("Please do not close the main login page during the login process")}catch(e){console.error("An error occurred while handling the OAuth callback:",e)}},[e]);let r=async e=>{try{let r=await (0,a.JT)(e);console.log("Login successful:",r)}catch(e){console.error("Login failed, token is invalid or expired:",e)}finally{window.location.replace("/")}};return null}}}]);